(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{209:function(e,t,n){},210:function(e,t,n){},215:function(e,t,n){},218:function(e,t,n){},422:function(e,t,n){},423:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(187),r=n.n(s),o=(n(209),n(41)),i=(n(210),n(204)),u=(n(215),n(3)),j=function(e){var t=e.name,n=e.setName,c=e.room,a=e.setRoom,s=e.onJoin;return Object(u.jsxs)("div",{className:"login",children:[Object(u.jsx)("input",{type:"text",className:"login__input",value:t,onChange:function(e){return n(e.target.value)},placeholder:"Input your username",required:!0}),Object(u.jsx)("input",{type:"text",className:"login__input",value:c,onChange:function(e){return a(e.target.value)},placeholder:"Input room id",required:!0}),Object(u.jsx)("button",{type:"button",className:"login__button",onClick:s,children:"Join a room"})]})},m=n(129),l=n.n(m),b=n(189),h=n(133),d=(n(218),n(203)),p=(n(422),n(202)),O=n.n(p),f=function(e){var t=e.message,n=e.username;return Object(u.jsxs)("div",{className:O()("message",t.author===n?"message--my":"message--other"),children:[Object(u.jsx)("div",{className:"message__text",children:t.message}),Object(u.jsx)("div",{className:"message__meta",children:Object(u.jsx)("p",{children:"".concat(t.author," ").concat(t.time)})})]})},x=function(e){var t=e.socket,n=e.room,a=e.username,s=Object(c.useState)(""),r=Object(o.a)(s,2),i=r[0],j=r[1],m=Object(c.useState)([]),p=Object(o.a)(m,2),O=p[0],x=p[1];Object(c.useEffect)((function(){t.on("receive_message",(function(e){console.log(e),x((function(t){return[].concat(Object(h.a)(t),[e])}))}))}),[t]);var g=function(){var e=Object(b.a)(l.a.mark((function e(){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return c={message:i,author:a,time:new Date(Date.now()).toLocaleTimeString(),room:n},e.next=4,t.emit("send_message",c);case 4:x((function(e){return[].concat(Object(h.a)(e),[c])})),j("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"chat",children:[Object(u.jsx)("div",{className:"chat__header",children:Object(u.jsx)("p",{className:"chat__header-text",children:"Chat room #".concat(n)})}),Object(u.jsx)(d.a,{className:"chat__body",children:O.map((function(e){return Object(u.jsx)(f,{message:e,username:a},e.message)}))}),Object(u.jsxs)("div",{className:"chat__footer",children:[Object(u.jsx)("input",{type:"text",className:"message__input",value:i,onChange:function(e){return j(e.target.value)},placeholder:"Type here...",onKeyPress:function(e){"Enter"===e.key&&g()}}),Object(u.jsx)("button",{type:"button",className:"message__send-button",onClick:g,children:"Send"})]})]})},g=Object(i.a)("https://simplechat1.herokuapp.com"),v=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(o.a)(s,2),i=r[0],m=r[1],l=Object(c.useState)(!1),b=Object(o.a)(l,2),h=b[0],d=b[1],p=Object(c.useState)(!1),O=Object(o.a)(p,2),f=O[0],v=O[1];Object(c.useEffect)((function(){return function(){g.close()}}),[]);return Object(u.jsxs)("div",{className:"starter",children:[f?Object(u.jsx)(x,{room:i,username:n,socket:g}):Object(u.jsx)(j,{name:n,setName:a,room:i,setRoom:m,onJoin:function(){if(!n||!i)return d(!0),void setTimeout((function(){d(!1)}),3e3);g.emit("join_room",i),v(!0)}}),h&&Object(u.jsx)("h1",{children:"Error"})]})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root"))}},[[423,1,2]]]);
//# sourceMappingURL=main.6127c6da.chunk.js.map